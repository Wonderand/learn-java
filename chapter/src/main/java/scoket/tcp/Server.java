package scoket.tcp;import java.io.*;import java.net.ServerSocket;import java.net.Socket;import java.nio.charset.StandardCharsets;/** * @Classname Server * @Pakage: scoket * @Author: hzr * @Description TODO * @Date 2025/1/6 11:42 * @Created by 22906 * @Version 1.0.0 */public class Server {    public static void main(String[] args) throws IOException{        ServerSocket ss = new ServerSocket(6666);        System.out.println("server is running...");        for (;;){            Socket sock = ss.accept();            System.out.println("connected from " + sock.getRemoteSocketAddress());            Thread t = new Handler(sock);            t.start();        }    }}class Handler extends Thread{    Socket sock;    public Handler(Socket sock){        this.sock = sock;    }    @Override    public void run() {        try(InputStream input = this.sock.getInputStream()){            try (OutputStream output = this.sock.getOutputStream()){                handle(input,output);            }        } catch (Exception e){            try {                this.sock.close();            } catch (IOException ioe){            }            System.out.println("client disconnected.");        }    }    private void handle(InputStream inputStream, OutputStream outputStream) throws IOException {        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(outputStream, StandardCharsets.UTF_8));        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, StandardCharsets.UTF_8));        writer.write("hello\n");        writer.flush();        for (;;){            String s = reader.readLine();            if ("bye".equals(s)){                writer.write("bye\n");                writer.flush();                break;            }            writer.write("ok:" + s + "\n");            writer.flush();        }    }}