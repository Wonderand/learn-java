package scoket.email;import com.sun.mail.util.MailSSLSocketFactory;import jakarta.mail.*;import jakarta.mail.internet.InternetAddress;import jakarta.mail.internet.MimeMessage;import java.security.GeneralSecurityException;import java.util.Properties;/** * @Classname smtp * @Pakage: scoket.email * @Author: hzr * @Description TODO * @Date 2025/1/7 10:51 * @Created by 22906 * @Version 1.0.0 */public class MailSmtp {    // 服务器地址    private static final String SMTP = "smtp.qq.com";    // 登录用户名    private static final String USERNAME = "2043352370@qq.com";    // 登录口令    private static final String PASSWORD = "mqtsbfgvupolciae";    private Properties propertie;    // 收件人    private String recipient;    public MailSmtp(){        this.propertie = new Properties();    }    public MailSmtp(String recipient) {        this.recipient = recipient;        this.propertie = new Properties();    }    public Session conn(){        this.propertie.put("mail.smtp.host",SMTP); //SMTP主机名        this.propertie.put("mail.smtp.port",465); //主机端口号        this.propertie.put("mail.smtp.auth","true");//是否需要用户认证        this.propertie.put("mail.smtp.starttls,enable","true");//启用TLS加密        MailSSLSocketFactory sf = null;        try {            sf = new MailSSLSocketFactory();        } catch (GeneralSecurityException e) {            throw new RuntimeException(e);        }        sf.setTrustAllHosts(true);        this.propertie.put("mail.smtp.ssl.enable","true");        this.propertie.put("mail.smtp.ssl.socketFactory",sf);        // 获取Session实例：        Session session = Session.getInstance(this.propertie, new Authenticator() {            @Override            protected PasswordAuthentication getPasswordAuthentication() {                return new PasswordAuthentication(USERNAME,PASSWORD);            }        });        // 设置debug模式便于调试:        session.setDebug(true);        return session;    }    public void send(String text){        Session session = conn();        MimeMessage message = new MimeMessage(session);        try {            // 设置发送方地址            message.setFrom(new InternetAddress(USERNAME));            // 设置接收方地址            message.setRecipient(Message.RecipientType.TO, new InternetAddress(this.recipient));            // 设置邮件主题            message.setSubject("Hello","UTF-8");            // 设置正文            message.setText(text,"UTF-8");            // 发送：            Transport.send(message);        } catch (MessagingException e) {            throw new RuntimeException(e);        }    }    public static void main(String[] args) {        MailSmtp mailSmtp = new MailSmtp("2290641663@qq.com");        mailSmtp.send("测试你好");    }}